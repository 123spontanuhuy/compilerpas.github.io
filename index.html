<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GCL Lexical Scanner</title>
<style>
body { font-family: Arial; background:#eef; padding:20px; }
textarea { width:100%; height:200px; font-family: monospace; }
#output { background:white; padding:10px; margin-top:20px; white-space:pre; }
button { padding:10px 20px; margin-top:10px; }
</style>
</head>
<body>

<h2>GCL Lexical Scanner</h2>

<textarea id="code">
if B -> x := 1 fi
</textarea>

<br>
<button onclick="scanGCL()">Scan</button>

<div id="output"></div>

<script>
function scanGCL() {
    const code = document.getElementById("code").value;
    let output = "";

    const tokenSpecs = [
        ["WHITESPACE", /^\s+/],
        ["KEYWORD", /^(if|then|else|fi|do|od|->|\|)/],
        ["NUMBER", /^[0-9]+/],
        ["ASSIGN", /^:=/],
        ["OP", /^[+\-*\/=<>!]/],
        ["IDENT", /^[A-Za-z][A-Za-z0-9_]*/],
        ["UNKNOWN", /^./]
    ];

    let text = code;

    while (text.length > 0) {
        let matched = false;

        for (let [type, regex] of tokenSpecs) {
            const match = text.match(regex);
            if (match) {
                matched = true;
                const value = match[0];

                if (type !== "WHITESPACE") {
                    output += `${type} : ${value}\n`;
                }

                text = text.slice(value.length);
                break;
            }
        }

        if (!matched) {
            output += "ERROR: Cannot tokenize.\n";
            break;
        }
    }

    document.getElementById("output").innerText = output;
}
</script>

</body>
</html>
